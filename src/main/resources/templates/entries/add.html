<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head"></head>
<body>

<header>
    <th:block th:replace="fragments/nav"></th:block>
</header>

<main role="main">
    <div class="container-fluid">
        <h1>Timeclicker</h1>
        <h2>Add entry</h2>
        <form action="#" th:action="@{/entries}" th:object="${entry}" method="post">
            <input type="hidden" th:field="*{key}"/>

            <div class="form-group">
                <label th:for="start">Start:</label>
                <div class="input-group mb-3">
                    <input type="text" th:field="*{start}" th:required="true" class="form-control"/>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="button-start-now" onclick="insertNow(document.getElementById('start'))"><span class="fas fa-clock"></span> Now</button>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label th:for="stop">Stop:</label>
                <div class="input-group mb-3">
                    <input type="text" th:field="*{stop}" th:required="false" class="form-control"/>
                    <div class="input-group-append">
                        <button class="btn btn-outline-secondary" type="button" id="button-stop-now" onclick="insertNow(document.getElementById('stop'))"><span class="fas fa-clock"></span> Now</button>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label th:for="breakDuration">Break:</label>
                <input type="text" th:field="*{{breakDuration}}" th:required="false" class="form-control"/>
                <small id="breakDurationHelpBlock" class="form-text text-muted">
                    Enter your break (hh:mm:ss).
                </small>
            </div>
            <div class="form-group">
                <label th:for="Description">Description:</label>
                <input type="text" th:field="*{description}" th:required="false" class="form-control"/>
            </div>
            <div class="form-group">
                <label th:for="tags">Tags:</label>
                <input type="text" th:field="*{tags}" th:required="false" class="form-control"/>
            </div>
            <div class="form-group">
                <label th:for="project">Project:</label>
                <input type="text" th:field="*{project}" th:required="false" class="form-control"/>
            </div>
            <input type="submit" value="Submit"/>
            <input type="reset" value="Reset"/>
            <a th:href="@{'/entries'}">Go back</a>
        </form>
    </div>
</main>

<footer>
    <th:block th:replace="fragments/foot"></th:block>
</footer>

<script>
    function insertNow(element) {
        var d = new Date();
        var timezoneOffset = d.getTimezoneOffset() / 60;
        var hours = d.getHours() + timezoneOffset;
        var datestring =
                                                d.getFullYear()   + "-" +
            (d.getMonth()   < 10 ? '0' : '') + (d.getMonth() + 1) + "-" +
            (d.getDate()    < 10 ? '0' : '') +  d.getDate()       + " " +
            (d.getHours() < 10 ? '0' : '') + hours + ":" +
            (d.getMinutes() < 10 ? '0' : '') +  d.getMinutes()    + ":" +
            (d.getSeconds() < 10 ? '0' : '') +  d.getSeconds();
        element.value = datestring;
    }
</script>

</body>
</html>
